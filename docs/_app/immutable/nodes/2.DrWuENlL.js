import{b as ue,d as Je,f as T,a as E}from"../chunks/B0Sl7_rO.js";import"../chunks/BnEtSCkS.js";import{o as De}from"../chunks/DPIJFYrR.js";import{R as N,s as j,y as ve,ae as Ae,aX as je,t as pe,I as $e,J as Me,aC as qe,az as Ce,B as Re,G as q,aY as Fe,k as J,aR as ze,u as A,r as Be,aZ as Ge,P as He,a_ as Ue,a$ as Ve,Q as C,T as We,e as Le,$ as Ye,U as c,g as s,a0 as S,W as g,V as d,X as Qe,aH as u,b0 as Xe,h as Ze}from"../chunks/6QOJJwLX.js";import{e as D,s as W}from"../chunks/CJJawW7-.js";import{i as L}from"../chunks/Bl-tSIDm.js";import{h as Ke,r as R,a as et,s as tt}from"../chunks/BtW2WAww.js";import{b as at}from"../chunks/DiSokiZg.js";import{i as rt}from"../chunks/Bx8s0tOU.js";import{b as fe}from"../chunks/DUPwXH-H.js";function st(e,t,o=!1,i=!1,v=!1){var n=e,p="";N(()=>{var r=Ae;if(p===(p=t()??"")){j&&ve();return}if(r.nodes_start!==null&&(je(r.nodes_start,r.nodes_end),r.nodes_start=r.nodes_end=null),p!==""){if(j){pe.data;for(var a=ve(),l=a;a!==null&&(a.nodeType!==$e||a.data!=="");)l=a,a=Me(a);if(a===null)throw qe(),Ce;ue(pe,l),n=Re(a);return}var m=p+"";o?m=`<svg>${m}</svg>`:i&&(m=`<math>${m}</math>`);var f=Je(m);if((o||i)&&(f=q(f)),ue(q(f),f.lastChild),o||i)for(;q(f);)n.before(q(f));else n.before(f)}})}function ot(e,t,o){var i=e==null?"":""+e;return i===""?null:i}function he(e,t,o,i,v,n){var p=e.__className;if(j||p!==o||p===void 0){var r=ot(o);(!j||r!==e.getAttribute("class"))&&(r==null?e.removeAttribute("class"):e.className=r),e.__className=o}return n}function F(e,t,o=t){var i=new WeakSet;Fe(e,"input",async v=>{var n=v?e.defaultValue:e.value;if(n=Y(e)?Q(n):n,o(n),J!==null&&i.add(J),await ze(),n!==(n=t())){var p=e.selectionStart,r=e.selectionEnd,a=e.value.length;if(e.value=n??"",r!==null){var l=e.value.length;p===r&&r===a&&l>a?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=p,e.selectionEnd=Math.min(r,l))}}}),(j&&e.defaultValue!==e.value||A(t)==null&&e.value)&&(o(Y(e)?Q(e.value):e.value),J!==null&&i.add(J)),Be(()=>{var v=t();if(e===document.activeElement){var n=Ge??J;if(i.has(n))return}Y(e)&&v===Q(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function Y(e){var t=e.type;return t==="number"||t==="range"}function Q(e){return e===""?null:+e}const nt=!0,Pt=Object.freeze(Object.defineProperty({__proto__:null,prerender:nt},Symbol.toStringTag,{value:"Module"}));function it(e){try{return e.length!==32?{valid:!1,message:"Event ID must be exactly 32 characters long."}:/^[0-9a-fA-F]{32}$/.test(e)?{valid:!0,message:"Valid Event ID."}:{valid:!1,message:"Event ID must contain only hexadecimal characters (0-9, a-f, A-F)."}}catch(t){return console.error("Validation error:",t),{valid:!1,message:"Validation failed due to internal error."}}}function lt(e,t,o){try{if(!e||!t)throw new Error("Org slug and project slug are required.");return`https://sentry.io/api/0/projects/${e}/${t}/events/${o}/json/`}catch(i){return console.error("Build URL error:",i),""}}async function ct(e){try{console.log("%cFetching public event from Sentry...","color: #6f42c1; font-weight: bold;",e);const t=await fetch(e,{method:"GET",headers:{Accept:"application/json"}});if(t.status===401||t.status===403)return console.warn("Sentry returned 401/403 – event is not publicly accessible (this is normal)"),null;if(!t.ok)throw new Error(`HTTP ${t.status} ${t.statusText}`);const o=await t.json();return console.log("%cPublic event JSON loaded successfully!","color: green; font-weight: bold;"),o}catch(t){return t instanceof TypeError&&t.message.includes("Failed to fetch")?console.error("Network error – are you offline or blocking CORS?"):console.error("Failed to fetch event JSON:",t),null}}function dt(e){try{let t=function(r,a){const l=[...a,r.id];r.status!=="ok"&&r.status!=="unknown"&&p.push(l),r.children.forEach(m=>t(m,l))};const o=e.contexts?.trace||{},i=e.spans||[],v=new Map,n={id:o.span_id||"root",label:`${o.op||"unknown"}${o.description?` - ${o.description}`:""}`,duration:o.start_timestamp&&o.timestamp?(o.timestamp-o.start_timestamp)*1e3:0,status:"unknown",children:[]};v.set(n.id,n),i.forEach(r=>{const a={id:r.span_id,label:`${r.op}${r.description?` - ${r.description}`:""}`,duration:(r.timestamp-r.start_timestamp)*1e3,status:r.status||"ok",children:[]};v.set(a.id,a)}),i.forEach(r=>{if(r.parent_span_id){const a=v.get(r.parent_span_id);a&&a.children.push(v.get(r.span_id))}});const p=[];return t(n,[]),{tree:n,errorPaths:p}}catch(t){return console.error("Trace parsing error:",t),{tree:{id:"error",label:"Parse Error",duration:0,status:"error",children:[]},errorPaths:[]}}}function X(e){return e>=1e3?`${(e/1e3).toFixed(2)} s`:`${e.toFixed(0)} ms`}function ut(e){try{return JSON.parse(e),!0}catch{return!1}}function ge(e,t){return t!=="ok"&&t!=="unknown"?"#d32f2f":e>500?"#ffc107":"#4caf50"}function be(e,t,o){try{let i=function(a){v.push({id:a.id,label:`${a.label}
${X(a.duration)}`,color:{background:ge(a.duration,a.status),border:a.status!=="ok"&&a.status!=="unknown"?"#b71c1c":"#666",highlight:{background:ge(a.duration,a.status)}},shape:"box",font:{color:"#ffffff",size:14,multi:"true"},widthConstraint:160}),a.children.forEach(l=>{n.push({from:a.id,to:l.id,arrows:"to",color:{color:"#666666"}}),i(l)})};if(typeof window.vis>"u"){e.innerHTML='<p style="color:red;">vis-network not loaded</p>';return}e.innerHTML="";const v=[],n=[];i(t),o.forEach(a=>{for(let l=0;l<a.length-1;l++)n.push({from:a[l],to:a[l+1],color:{color:"#d32f2f",highlight:"#d32f2f"},dashes:!0,width:4,arrows:"to"})});const p={nodes:new window.vis.DataSet(v),edges:new window.vis.DataSet(n)},r={layout:{hierarchical:{direction:"UD",sortMethod:"directed",nodeSpacing:200,levelSeparation:180}},physics:!1,interaction:{zoomView:!0,dragView:!0,navigationButtons:!0}};new window.vis.Network(e,p,r)}catch(i){console.error("Trace tree rendering error:",i),e.innerHTML=`<p style="color:red;">Render failed: ${i.message}</p>`}}function vt(e){try{const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"});saveAs(o,"trace-summary.json")}catch(t){console.error("JSON export error:",t)}}async function pt(e){try{(await html2canvas(e)).toBlob(o=>{if(o)saveAs(o,"trace-tree.png");else throw new Error("Blob creation failed")})}catch(t){console.error("Failed to export PNG:",t)}}var ft=T('<meta name="description" content="Paste any Sentry event JSON → get a beautiful interactive trace tree in &lt;3s. 100% offline, private, open-source."/>'),ht=T('<div class="row g-3 mb-3"><div class="col-md-6"><input type="text" class="form-control form-control-lg" placeholder="Organization Slug (e.g. getsentry)"/></div> <div class="col-md-6"><input type="text" class="form-control form-control-lg" placeholder="Project Slug (e.g. sentry)"/></div></div> <div class="input-group"><input type="text" class="form-control form-control-lg" placeholder="32-character Event ID"/> <button class="btn btn-primary btn-lg px-5">Load Event</button></div>',1),gt=T(`<textarea class="form-control font-monospace" rows="10" placeholder="Paste your full Sentry event JSON here (from the 'JSON' tab)..."></textarea> <div class="mt-3 text-end"><button class="btn btn-success btn-lg px-5">Parse & Visualize</button></div>`,1),bt=T('<div role="alert"><!></div>'),mt=T('<div class="card shadow-sm mb-4"><div class="card-header bg-primary text-white d-flex justify-content-between align-items-center"><h5 class="mb-0">Interactive Trace Tree</h5> <div><button class="btn btn-light btn-sm me-2">Export JSON</button> <button class="btn btn-light btn-sm">Export PNG</button></div></div> <div class="card-body p-0"><div id="trace-container" style="height: 620px; border-radius: 0 0 0.375rem 0.375rem;" class="svelte-1uha8ag"></div></div></div> <div class="row"><div class="col-md-6"><div class="card shadow-sm"><div class="card-header bg-dark text-white"><h5 class="mb-0">Performance Summary</h5></div> <div class="card-body"><ul class="list-group list-group-flush"><li class="list-group-item d-flex justify-content-between"><strong>Total Duration</strong> <span class="badge bg-primary rounded-pill fs-6"> </span></li> <li class="list-group-item d-flex justify-content-between"><strong>Error Paths</strong> <span> </span></li></ul></div></div></div></div>',1),yt=T('<div class="container py-4"><h1 class="text-center mb-5 display-5 fw-bold text-primary">Sentry Event ID Decoder & Trace Analyzer</h1> <div class="card shadow-sm mb-4"><div class="card-body p-4 p-md-5"><div class="form-check form-switch mb-4 fs-5"><input class="form-check-input" type="checkbox" id="inputToggle"/> <label class="form-check-label fw-bold" for="inputToggle"> </label></div> <!> <!></div></div> <!></div> <section id="about" class="page-section container"><h2>About Sentry Event Decoder</h2> <p class="fs-5 text-muted">The fastest, most private way to understand any Sentry trace — in seconds, anywhere.</p> <p><strong>Sentry Event Decoder</strong> is a free, open-source, fully client-side Progressive Web App built by <strong>AxelBase</strong> in Oslo, Norway, and battle-tested in production by developers worldwide — including high-stakes e-commerce platforms.</p> <p>It was born from a simple frustration: during critical incidents, waiting for Sentry’s UI to load can cost minutes — and minutes cost money, users, and sleep. I needed a tool that worked <em>instantly</em>, even offline, even on a plane, even when the internet is down and the alert is screaming.</p> <p>So I built exactly that: paste any Sentry event JSON (or just the event ID + org/project slugs), and in under 3 seconds you get a beautiful, interactive trace tree with:</p> <ul class="feature-list"><li>Red/Yellow/Green performance coloring (>1s red, 500ms–1s yellow, ≤500ms green)</li> <li>Bold dashed red lines showing error propagation from root to failure</li> <li>Zoom, pan, collapse, and search powered by vis-network</li> <li>One-click PNG and JSON export for Slack, Jira, or post-mortems</li> <li>100% offline after first visit — installable as a PWA</li></ul> <p>This is not a replacement for Sentry — it’s the <strong>emergency flashlight</strong> you reach for when the lights go out. No login. No rate limits. No data ever leaves your browser. Your event JSON is parsed locally and immediately discarded from memory.</p> <p>The entire project is open source under the MIT license. Fork it, deploy it internally, brand it — it’s yours. The public version is hosted on GitHub Pages and will remain free forever.</p> <p>Built with care in Oslo, Norway, and used daily by on-call engineers who can’t afford to wait.</p> <p class="mt-4"><a href="https://github.com/AxelBase/sentry-event-decoder" target="_blank" rel="noopener" class="btn btn-outline-primary">View Source on GitHub</a> <a class="btn btn-outline-secondary ms-3">Read the Blog</a></p></section> <section id="how-to-use" class="page-section container"><h2>How to Use Sentry Event Decoder</h2> <p class="fs-5 text-muted">Three ways to get a trace — all instant, all private.</p> <div class="row g-5 mt-3"><div class="col-lg-4"><h3 class="text-primary">Method 1: Event ID (Fastest)</h3> <ol><li>Copy the event ID from any Sentry issue (the 32-character hex string)</li> <li>Paste it into the "Event ID" field</li> <li>Enter your organization slug (e.g., <code>sentry</code>) and project slug (e.g., <code>sentry</code>)</li> <li>Click "Load Public Event" or press Enter</li></ol> <p class="text-muted small">Note: Most events are private, so you’ll usually see “401 – not public”. That’s expected — move to Method 2.</p></div> <div class="col-lg-4"><h3 class="text-success">Method 2: Paste Full JSON (Recommended)</h3> <ol><li>In Sentry, open the issue → click "JSON" tab → "Copy JSON"</li> <li>Switch to the "Manual JSON" tab here</li> <li>Paste the entire JSON</li> <li>Click "Parse Trace" or press Ctrl+Enter</li></ol> <p>This works 100% of the time, even with private events, and runs completely offline.</p></div> <div class="col-lg-4"><h3 class="text-info">Method 3: Drag & Drop File</h3> <p>Export the event JSON from Sentry → save as <code>.json</code> → drag the file onto the page.</p></div></div> <hr class="my-5"/> <h3>Understanding the Trace</h3> <ul class="feature-list"><li><span class="badge bg-danger">Red spans</span> → >1 second OR any error status</li> <li><span class="badge bg-warning">Yellow spans</span> → 501ms–1s</li> <li><span class="badge bg-success">Green spans</span> → ≤500ms and successful</li> <li><strong>Dashed red line</strong> → error propagation path from root to failure</li> <li>Click any node → see full span details</li> <li>Use mouse wheel or buttons to zoom/drag</li></ul> <h3 class="mt-5">Export & Share</h3> <p>Once rendered:</p> <ul><li>Click <strong>Export PNG</strong> → perfect screenshot for Slack/Jira</li> <li>Click <strong>Export JSON</strong> → cleaned trace context for scripts</li></ul> <p class="mt-4">Pro tip: Install as a PWA (Chrome/Edge/Firefox will prompt) — then use it completely offline forever.</p></section> <section id="faq" class="page-section container"><h2>Frequently Asked Questions</h2> <p class="fs-5 text-muted">Everything you need to know — answered.</p> <div class="accordion accordion-flush" id="faqAccordion"><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#q1">Why do I get “401 Unauthorized” when using Event ID?</button></h2> <div id="q1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion"><div class="accordion-body">This is <strong>normal and expected</strong>. Sentry never exposes raw event JSON publicly — even for public projects. Use the “Manual JSON” tab and paste the full JSON instead. That works 100% of the time.</div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q2">Is my data private and secure?</button></h2> <div id="q2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion"><div class="accordion-body">Yes — 100%. Everything runs in your browser. Your JSON never leaves your device. No servers, no logging, no analytics. Even when you use the public URL fetch, it’s done from your browser only.</div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q3">Can I use this offline?</button></h2> <div id="q3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion"><div class="accordion-body">Absolutely. After your first visit, click “Install” when prompted (or Add to Home Screen on mobile). The entire app and all libraries are cached via Service Worker. Paste JSON → works forever, no internet required.</div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q4">Why is a span >1s yellow and not red?</button></h2> <div id="q4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion"><div class="accordion-body">Impossible — our logic is: error status → red (highest priority), then >1000ms → red, then >500ms → yellow. If you see a >1s span that’s yellow, you’ve discovered a bug worth a GitHub issue!</div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q5">Can I deploy my own private version?</button></h2> <div id="q5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion"><div class="accordion-body">Yes — fork the repo, click “Deploy to GitHub Pages” or Vercel/Netlify, and you have your own internal instance in under 60 seconds. Many companies do this for air-gapped environments.</div></div></div> <div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#q6">Is this affiliated with Sentry.io?</button></h2> <div id="q6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion"><div class="accordion-body">No. This is an independent open-source tool created by AxelBase. We love Sentry and use it daily — this just makes debugging faster when every second counts.</div></div></div></div></section>',1);function Jt(e,t){He(t,!1);let o=S("eventId"),i=S(""),v=S(""),n=S(""),p=S(""),r=S(""),a=S(""),l=null,m=S(),f=S(null);function me(){u(o,s(o)==="eventId"?"json":"eventId"),Z()}function Z(){l=null,u(f,null),u(r,""),u(a,"")}async function K(){if(Z(),s(o)==="eventId"){const h=it(s(i));if(u(r,h.message),u(a,h.valid?"success":"danger"),!h.valid)return;if(!s(n)||!s(p)){u(r,"Organization slug and project slug are required."),u(a,"danger");return}const b=lt(s(n),s(p),s(i));if(!b){u(r,"Failed to build URL."),u(a,"danger");return}if(l=await ct(b),!l){u(r,`
<strong>This event is not publicly accessible (401/403)</strong><br><br>
This is <strong>completely normal</strong> — Sentry never exposes raw event JSON publicly.<br><br>
Please switch to "Paste JSON Manually" below.
        `.trim()),u(a,"warning");return}}else{if(!ut(s(v))){u(r,"Invalid JSON format."),u(a,"danger");return}try{l=JSON.parse(s(v))}catch{u(r,"JSON parsing failed."),u(a,"danger");return}}u(f,dt(l)),u(r,"Trace loaded and visualized successfully!"),u(a,"success")}De(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register(`${fe}/sw.js`).catch(()=>{})});function ye(){l&&vt(l.contexts?.trace||l)}async function we(){s(m)&&await pt(s(m))}Ue(()=>(s(f),s(m),be),()=>{s(f)&&s(m)&&be(s(m),s(f).tree,s(f).errorPaths)}),Ve(),rt();var ee=yt();Ke("1uha8ag",h=>{var b=ft();Le(()=>{Ye.title="AxelBase – Sentry Event ID Decoder & Trace Analyzer"}),E(h,b)});var z=C(ee),B=g(c(z),2),te=c(B),G=c(te),$=c(G);R($);var ae=g($,2),_e=c(ae,!0);d(ae),d(G);var re=g(G,2);{var Se=h=>{var b=ht(),y=C(b),w=c(y),k=c(w);R(k),d(w);var _=g(w,2),M=c(_);R(M),d(_),d(y);var O=g(y,2),I=c(O);R(I);var P=g(I,2);d(O),N(()=>P.disabled=!s(i)||!s(n)||!s(p)),F(k,()=>s(n),x=>u(n,x)),F(M,()=>s(p),x=>u(p,x)),F(I,()=>s(i),x=>u(i,x)),D("click",P,K),E(h,b)},ke=h=>{var b=gt(),y=C(b);Xe(y);var w=g(y,2),k=c(w);d(w),N(_=>k.disabled=_,[()=>(s(v),A(()=>!s(v).trim()))]),F(y,()=>s(v),_=>u(v,_)),D("click",k,K),E(h,b)};L(re,h=>{s(o)==="eventId"?h(Se):h(ke,!1)})}var xe=g(re,2);{var Ee=h=>{var b=bt(),y=c(b);st(y,()=>s(r)),d(b),N(()=>he(b,1,`alert alert-${(s(a)||"info")??""} mt-4`)),E(h,b)};L(xe,h=>{s(r)&&h(Ee)})}d(te),d(B);var Ne=g(B,2);{var Te=h=>{var b=mt(),y=C(b),w=c(y),k=g(c(w),2),_=c(k),M=g(_,2);d(k),d(w);var O=g(w,2),I=c(O);at(I,V=>u(m,V),()=>s(m)),d(O),d(y);var P=g(y,2),x=c(P),ne=c(x),ie=g(c(ne),2),le=c(ie),H=c(le),ce=g(c(H),2),Ie=c(ce,!0);d(ce),d(H);var de=g(H,2),U=g(c(de),2),Pe=c(U,!0);d(U),d(de),d(le),d(ie),d(ne),d(x),d(P),N(V=>{W(Ie,V),he(U,1,`badge ${s(f),A(()=>s(f).errorPaths.length>0?"bg-danger":"bg-success")??""} rounded-pill fs-6`),W(Pe,(s(f),A(()=>s(f).errorPaths.length)))},[()=>(Ze(X),s(f),A(()=>X(s(f).tree.duration)))]),D("click",_,ye),D("click",M,we),E(h,b)};L(Ne,h=>{s(f)&&h(Te)})}d(z);var se=g(z,2),oe=g(c(se),18),Oe=g(c(oe),2);d(oe),d(se),Qe(4),N(()=>{et($,s(o)==="json"),W(_e,s(o)==="json"?"Paste JSON Manually (Recommended)":"Try Load by Event ID"),tt(Oe,"href",`${fe??""}/blog`)}),D("change",$,me),E(e,ee),We()}export{Jt as component,Pt as universal};
